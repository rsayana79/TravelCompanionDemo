<div *ngIf="messageService.users?.length == 0">No messages to show</div>
<div class="d-flex flex-row align-items-start" style="max-height: 30em;">
    <div class="d-flex flex-column p-2" style="width:15%">
        <button *ngFor="let user of (messageService.users)" (click)="loadMessageThread(user)"
        [ngClass]="{'btn-info': (this.userNameInCurrentChat == user.userName),
        'btn-outline-info': (this.userNameInCurrentChat != user.userName && user.newMessagesCount == 0),
        'btn-success': (user.newMessagesCount > 0)}"              
        class="p-2 btn" style="width: 100%; margin-bottom:5%; display: block;">
            <span style="float:left">{{user.userName}}</span> 
            <span *ngIf="user.newMessagesCount > 0" class="badge bg-secondary" style="float:right">{{user.newMessagesCount}}</span>
        </button>
    </div>
    <div class="d-flex flex-column justify-content-evenly p-2" style="width:50%;">
        <div class="d-flex flex-row card bg-info text-white p-2" style="min-height:3em; max-height:3em; margin-bottom: 0.5em;">
            <h4>Chatting with - {{this.userNameInCurrentChat}}</h4>
        </div>
        <div #scrollMe class="d-flex card overflow-auto border-primary p-2 flex-column column-reverse" 
            style="min-height:20em; max-height:20em;" (scroll)="userscrolled()">
            <div class="text-success" *ngFor="let message of (messageService.messages)" style="width: 100%;">
                <p
                    [ngClass]="{'d-flex flex-row-reverse text-danger': message.senderId == this.accountService.getcurrentUserId()}">
                    {{message.content}}</p>

            </div>
        </div>
    </div>
</div>
<div class="mb-3 textarea-container p-2" style="width:50%; margin-left:15%;">
    <textarea class="form-control text-danger" id="exampleFormControlTextarea1" rows="3"
        placeholder="Type your message here" [(ngModel)]="newMessage"  (keydown.enter)="createMessageEvent($event)"></textarea>
    <button type="button" class="btn btn-primary" (click)="createMessage()">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-send"
            viewBox="0 0 16 16">
            <path
                d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z" />
        </svg>
    </button>
</div>